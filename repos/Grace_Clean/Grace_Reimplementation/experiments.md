\## Day4 (2026-02-24) Baseline Train



\- Workdir: D:\\SparkCup\\my\_project\\repos\\Grace\_Clean\\Grace\_Reimplementation

\- Command: python -m grace\_v2.train

\- Output metrics: checkpoints\_v2\\training\_metrics\_v2.csv

\- Logs: logs\\episode.jsonl, logs\\ppo\_update.jsonl

\- Warning: \[CapNorm] Missing calibration\_fixed\_summary.json, using conservative defaults.

\- Stages:

  - stage0\_pretrain (pretrain) 60 episodes

  - stage1\_mix (bandit) 120 episodes

  - stage2\_heavy (bandit) 200 episodes

  - stage3\_full (joint) 200 episodes

\- Quick check:

  - stage3\_full delivery\_ratio ~ 1.0

  - p95\_latency\_ms varies by mode (light lower, heavy/burst higher)











\## Day4.1 (2026-02-25) Poisson-like vs Burst curriculum comparison



\- Workdir: D:\\SparkCup\\my\_project\\repos\\Grace\_Clean\\Grace\_Reimplementation

\- Goal: compare traffic profile effects by changing stage3\_full mode sampling

\- Variant A (poisson-like):

  - config: grace\_v2/config\_poisson.py

  - stage3\_full: {"light": 0.30, "medium": 0.40, "heavy": 0.30}

  - cmd: python -m grace\_v2.train (RUN\_ID=poisson\_like\_20260225)

  - metrics: checkpoints\_v2/training\_metrics\_poisson\_like.csv

\- Variant B (burst-heavy):

  - config: grace\_v2/config\_burst.py

  - stage3\_full: {"light": 0.15, "medium": 0.20, "heavy": 0.15, "burst": 0.50}

  - cmd: python -m grace\_v2.train (RUN\_ID=burst\_20260225)

  - metrics: checkpoints\_v2/training\_metrics\_burst.csv

\- Sanity check:

  - poisson-like stage3\_full modes: mostly light/medium/heavy

  - burst stage3\_full modes: burst appears frequently; p95\_latency\_ms higher







\## Day5 (2026-02-25) Trained Artifact Validation + E1 Static Evaluation + Plot Prep



\- Workdir: D:\\SparkCup\\my\_project\\repos\\Grace\_Clean\\Grace\_Reimplementation



\### Trained artifacts (stage3\_full)

\- PPO checkpoint: checkpoints\_v2\\stage3\_full\_ppo.pth

  - Loaded as raw state\_dict (collections.OrderedDict)

  - State-dict entries: 12

  - Total params: 39,301

  - Actor input\_dim=21, action\_dim=4 (actor last layer out=4)

\- Bandit checkpoint: checkpoints\_v2\\stage3\_full\_bandit.pkl

  - Loaded as grace\_v2.bandit.PairModeLinUCB

  - alpha=1.0, n\_features=7, solvers=3

\- Cluster manager: checkpoints\_v2\\clusters.json

  - top-level keys: clusters, dist\_matrix, network\_diameter

  - clusters contains per-pair path candidates + mask + summary (avg\_hops, center\_hop, etc.)



\### Notes on eval script default loading

\- eval script: grace\_v2\\eval\_E1\_static.py

\- load\_trained\_stage3() uses:

  - clusters.json if exists, otherwise initializes empty PathClusterManager and warns if clusters missing

  - ppo\_ckpt: checkpoints\_v2\\stage3\_full\_ppo.pth (ppo.load)

  - bandit\_ckpt: tries checkpoints\_v2\\stage3\_adapt\_bandit.pkl first, falls back to checkpoints\_v2\\stage3\_full\_bandit.pkl



\### E1 static evaluation (flows sweep, no burst)

\- Script: grace\_v2\\eval\_E1\_static.py

\- Command:

  - python .\\grace\_v2\\eval\_E1\_static.py --seeds 0 1 2 --outdir results\_E1\_static\_trained\_20260225

\- Output runs CSV:

  - results\_E1\_static\_trained\_20260225\\E1\_static\_runs.csv

  - rows: 108

  - cols: topology, flow\_pairs\_id, flows, mode, policy, seed, delivery\_ratio, goodput\_mbps, p95\_latency\_ms

\- Quick sanity check (example row):

  - flows=3, mode=light, seed=0: SP delivery ~0.8066; ECMP/HIER\_STAGE3 delivery=1.0

  - p95: HIER\_STAGE3 < ECMP for that example (34.7ms vs 43.3ms)



\### Plotting (E1 static)

\- Script: grace\_v2\\plot\_E1\_static\_figs.py

\- Help: plot\_E1\_static\_figs.py --runs RUNS --outdir OUTDIR

\- Planned command:

  - python .\\grace\_v2\\plot\_E1\_static\_figs.py --runs results\_E1\_static\_trained\_20260225\\E1\_static\_runs.csv --outdir results\_E1\_static\_trained\_20260225\\plots



\### Findings (E1 Static, no burst)



\- Delivery: as concurrent flows increase (F=3→12), SP degrades fastest; ECMP degrades moderately; HIER\_STAGE3 maintains the highest delivery across light/medium/heavy.

\- Goodput: SP saturates early (nearly flat), while ECMP and HIER\_STAGE3 scale with F; HIER\_STAGE3 achieves the highest total goodput especially for F≥6.

\- Goodput per flow: per-flow goodput decreases with F, but HIER\_STAGE3 consistently keeps the best per-flow throughput under medium/high concurrency.

\- Tail latency (p95): SP tail latency explodes with F (~1.3s at high F); ECMP is lower but still high (~0.85s); HIER\_STAGE3 remains significantly lower (~0.45s), showing better congestion robustness.



\### Outputs (E1 static)



\- Runs CSV:

&nbsp; - results\_E1\_static\_trained\_20260225\\E1\_static\_runs.csv



\- Clean plots (generated by tools\\plot\_E1\_static\_clean.py):

&nbsp; - results\_E1\_static\_trained\_20260225\\plots\\E1\_static\_delivery\_clean.png

&nbsp; - results\_E1\_static\_trained\_20260225\\plots\\E1\_static\_goodput\_clean.png

&nbsp; - results\_E1\_static\_trained\_20260225\\plots\\E1\_static\_goodput\_per\_flow\_clean.png

&nbsp; - results\_E1\_static\_trained\_20260225\\plots\\E1\_static\_p95\_clean.png



\- Summary table:

&nbsp; - results\_E1\_static\_trained\_20260225\\plots\\E1\_static\_summary\_by\_mode\_flows\_policy.csv



\- Legacy plots (original script outputs, archived):

&nbsp; - results\_E1\_static\_trained\_20260225\\plots\\legacy\_original\\E1\_static\_delivery.png

&nbsp; - results\_E1\_static\_trained\_20260225\\plots\\legacy\_original\\E1\_static\_goodput.png

&nbsp; - results\_E1\_static\_trained\_20260225\\plots\\legacy\_original\\E1\_static\_goodput\_per\_flow.png

&nbsp; - results\_E1\_static\_trained\_20260225\\plots\\legacy\_original\\E1\_static\_p95.png

